1.리팩토링 전, 코드 확인하기
=======================
```python
class GrabStore:
    def __init__(self):
        self.money = 0
        self.name = "그랩마켓" # 만약, 사용자 생성시 store의 변경이 일어나야 한다면? -> 일일히 코드 수정이 번거롭게 일어날 것이다.
        self.products = {
            1: {"name": "키보드", "price": 30000},
            2: {"name": "모니터", "price": 50000},
        }

    def set_money(self, money):
        self.money = money

    def set_products(self, products):
        self.products = products

    def get_money(self):
        return self.money

    def get_products(self):
        return self.products

class User:
    def __init__(self):
        self.money = 0
        self.store = GrabStore()
        self.belongs = []

    def set_money(self, money):
        self.money = money

    def set_belongs(self, belongs):
        self.belongs = belongs

    def get_money(self):
        return self.money

    def get_belongs(self):
        return self.belongs

    def get_store(self):
        return self.store

    def see_product(self, product_id):
        products = self.store.get_products()
        return products[product_id]

    def purchase_product(self, product_id):
        product = self.see_product(product_id)
        if self.money >= product["price"]:
            self.store.products.pop(product_id)  # 상점에서 상품 꺼내기
            self.money -= product["price"]  # 사용자가 돈 내기
            self.store.money += product["price"]  # 상점에서 돈 받기
            self.belongs.append(product)
            return product
        else:
            raise Exception("잔돈이 부족합니다")

if __name__ == "__main__":
    user = User()
    user.set_money(100000)
    user.purchase_product(product_id=1)
```

2.객체지향 리팩토링1
================
```python
from abc import ABC, abstractmethod


class Store(ABC):
    @abstractmethod
    def __init__(self):
        self.money = 0
        self.name = ""
        self.products = {}

    @abstractmethod
    def set_money(self, money:int):
        pass

    @abstractmethod
    def set_products(self, products:str):
        pass

    @abstractmethod
    def get_money(self, money):
        pass

    def get_products(self, products):
        pass

class GrabStore:
    def __init__(self): # 초기화 메서드. 생성자라고 생각하면 될 듯
        self.money = 0 # self는 this와 같다고 생각하면 된다.
        self.name = "그랩마켓"
        self.products = {
            1: {"name": "키보드", "price": 30000},
            2: {"name": "모니터", "price": 50000},
        }

    def set_money(self, money):
        self.money = money

    def set_products(self, products):
        self.products = products

    def get_money(self):
        return self.money

    def get_products(self):
        return self.products

class FruitsStore(Store):
    def __init__(self):
        self.money = 0
        self.name = "과일마켓"
        self.products = {
            1: {"name": "바나나", "price": 30000},
            2: {"name": "사과", "price": 50000},
        }

    def set_money(self, money):
        self.money = money

    def set_products(self, products):
        self.products = products

    def get_money(self):
        return self.money

    def get_products(self):
        return self.products

class User:
    def __init__(self, store:Store): # 의존성의 주입을 위한 User 설계(DI)
        self.money = 0
        self.store = store # 만약, User가 다른 Store를 원한다? -> 외부에서 의존성 주입을 통한 유연한 프로그램 
        self.belongs = []

    def set_money(self, money):
        self.money = money

    def set_belongs(self, belongs):
        self.belongs = belongs

    def get_money(self):
        return self.money

    def get_belongs(self):
        return self.belongs

    def get_store(self):
        return self.store

    def see_product(self, product_id):
        products = self.store.get_products()
        return products[product_id]

    def purchase_product(self, product_id):
        product = self.see_product(product_id)
        if self.money >= product["price"]:
            self.store.products.pop(product_id)  # 상점에서 상품 꺼내기
            self.money -= product["price"]  # 사용자가 돈 내기
            self.store.money += product["price"]  # 상점에서 돈 받기
            self.belongs.append(product)
            return product
        else:
            raise Exception("잔돈이 부족합니다")

if __name__ == "__main__":
    user_a = User(store=GrabStore()) # User 생성시에 필요한 Store를 주입받는다.
    user_b = User(store=FruitsStore()) 
```
